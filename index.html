<!DOCTYPE html>
<html lang="en" dir="ltr">
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<!-- *** [ FONTS ] *** -->
		<link rel="preconnect" href="https://fonts.gstatic.com">
		<link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap" rel="stylesheet">
		<!-- *** [ FONT AWESOME ] *** -->
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.2/css/all.min.css" integrity="sha512-HK5fgLBL+xu6dm/Ii3z4xhlSUyZgTT9tuc/hSrtw6uzJOvgRr2a9jyxxT1ely+B+xFAmJKVSTbpM/CuL7qxO8w==" crossorigin="anonymous" />
		<!-- *** [ MY CSS ] *** -->
		<link rel="stylesheet" href="css/master.css">
		<!-- *** [ JQUERY - Google CDN ] *** -->
		<!-- <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script> -->
		<!-- *** [ VUE.JS ] *** -->
		<script src="https://cdn.jsdelivr.net/npm/vue@2/dist/vue.js"></script>
		<!-- *** [ Day.js ] ***  -->
		<script src="https://unpkg.com/dayjs@1.8.21/dayjs.min.js"></script>
		<!-- *** [ MY JS - (jQuery doc ready) ] *** -->
		<!-- <script type="text/javascript" src="js/main.js"></script> -->
		<!-- *** *** -->
		<link rel="shortcut icon" href="#">
		<title>js-html-css-boolzap</title>
	</head>
	<body>

		<div id="root" class="flex-row-co">

			<div class="main_wrapper flex-row">

				<!--*---------------- LEFT SIDE ----------------*-->
				<div class="left_side flex-col">

					<!-- ** left header ** -->
					<div class="left_header flex-row">
						<!-- --------------------------- will be component --- -->
						<div class="component flex-row">
							<div class="avatar_img">
								<img :src="imageSrc(user)" alt="">
							</div>
							<div class="avatar_name flex-row-cv">
								<div class="txt_1">{{user.name}}</div>
							</div>
						</div>
						<!-- ------------------------------------------------- -->
						<div class="usr_icons flex-row-cv flex-row-right flex-grow-1">
							<i class="fas fa-circle-notch"></i>
							<i class="fas fa-comment-alt"></i>
							<i class="fas fa-ellipsis-v"></i>
						</div>
					</div>

					<!-- ** left notice ** -->
					<div class="left_notice flex-row-cv">
						<div class="notice_icon">
							<i class="fas fa-bell-slash"></i>
						</div>
						<div class="notice_message">
							<div class="txt_1">Ricevi notifiche d nuovi messaggi</div>
							<div class="txt_3">Attiva le notifiche desktop</div>
						</div>
					</div>

					<!-- ** left search ** -->
					<div class="left_search flex-row-cv">
						<!-- ! fare con label -->
						<div class="search_btn">
							<i class="fas fa-search"></i>
						</div>
						<div class="input_text_field flex-grow-1">
							<input type="text" placeholder="Cerca o ninizia una nuova chat"
									v-model="srcInput"
									@keyup="srcChat(srcInput)">
						</div>
					</div>

					<!-- ** chat list contanier ** -->
					<div class="chat_list_contanier flex-grow-1">
						<div class="contact flex-row" 
								v-for="(contact,index) in contacts" 
								:class="(index == contactSelectedIndex)?'selected':null" 
								@click="chatBtn(index)"
								v-if="contact.visible">
							<!-- --------------------------- will be component --- -->
							<div class="component flex-row">
								<div class="avatar_img">
									<img :src="imageSrc(contact)" alt="">
								</div>
								<div class="avatar_name flex-row-cv">
									<div class="txt_1">{{contact.name}}</div>
								</div>
							</div>
							<!-- ------------------------------------------------- -->
							<div class="chat_info flex-col-cv flex-col-right">
								<div class="txt_2">{{lastMsg(contact).text}}</div>
								<div class="txt_2">{{lastMsg(contact).date}}</div>
							</div>
						</div> <!-- v-for: contact,index -->
					</div>

				</div> <!-- left_side -->

				<!--*---------------- RIGHT SIDE ----------------*-->
				<div class="right_side flex-col">

					<!-- ** right header ** -->
					<div class="right_header flex-row">
						<!-- --------------------------- will be component --- -->
						<div class="contact_avatar">
							<img :src="imageSrc(contacts[contactSelectedIndex])" alt="">
						</div>
						<div class="contact_info flex-grow-1">
							<div class="txt_1">{{contacts[contactSelectedIndex].name}}</div>
							<div class="txt_2">{{selectedContactUpdate}}</div>
						</div>
						<!-- ------------------------------------------------- -->
						<div class="contact_icons flex-row-cv">
							<i class="fas fa-search"></i>
							<i class="fas fa-paperclip"></i>
							<i class="fas fa-ellipsis-v"></i>
						</div>						
					</div>

					<!-- ** chat container ** -->
					<div class="chat_container flex-grow-1">
						<div class="chat_msg_list flex-col-co">
							<div class="msg_row flex-col" v-for="(message,index) in contacts[contactSelectedIndex].messages">
								<div class="msg" :id="'msg'+index"
										:class="message.status"
										@mouseover="msgOverIndex = index"
										@mouseleave="msgOverIndex = -1">
									<div class="msg_text txt_1" :class="{deleted: message.status.includes('deleted')}">{{message.text}}</div>
									<div class="msg_date txt_4">{{message.date}}</div>
									<div class="msg_edit">
										<i class="fas fa-angle-down"
												v-if="index == msgOverIndex"
												@mouseleave="msgEditPanelLeave"
												@click="msgEditPanelIsOpen = !msgEditPanelIsOpen">
										</i>
										<div class="msg_edit_panel"
												v-show="index == msgOverIndex && msgEditPanelIsOpen"
												@mouseover="msgEditPanelOver"
												@mouseleave="msgEditPanelLeave">
											<div class="msg_info txt_1" @click="msgInfos(message)">Message Info</div>
											<div class="msg_info txt_1" @click="msgDelete(message)">Delete Message</div>
											<div class="msg_info txt_1" @click="msgAnnihilate(index)">Annihilate Message</div>
										</div>
									</div>
								</div>
							</div> <!-- v-for: message -->						
						</div>
					</div>

					<!-- ** input container ** -->
					<div class="input_container flex-row-cv">
						<i class="far fa-smile"></i>
						<div class="input_text_field flex-grow-1">
							<input type="text" placeholder="Scrivi un messaggio" 
									v-model="msgInput" 
									@keyup.enter="addSentMsg" 
									ref="msgInputField">
						</div>
						<i class="fas fa-microphone" v-if="msgInput==''"></i>
						<i class="fab fa-telegram-plane" @click="addSentMsg" v-else></i>
					</div>

				</div> <!-- right_side -->

			</div> <!-- main_wrapper -->

		</div> <!-- Vue root -->



		<!-- *** [ MY JS ] *** -->
		<script type="text/javascript" src="js/main.js"></script>
	</body>
</html>
