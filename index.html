<!DOCTYPE html>
<html lang="en" dir="ltr">
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<!-- *** [ FONTS ] *** -->
		<link rel="preconnect" href="https://fonts.gstatic.com">
		<link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap" rel="stylesheet">
		<!-- *** [ FONT AWESOME ] *** -->
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.2/css/all.min.css" integrity="sha512-HK5fgLBL+xu6dm/Ii3z4xhlSUyZgTT9tuc/hSrtw6uzJOvgRr2a9jyxxT1ely+B+xFAmJKVSTbpM/CuL7qxO8w==" crossorigin="anonymous" />
		<!-- *** [ MY CSS ] *** -->
		<link rel="stylesheet" href="css/master.css">
		<!-- *** [ JQUERY - Google CDN ] *** -->
		<!-- <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script> -->
		<!-- *** [ VUE.JS ] *** -->
		<script src="https://cdn.jsdelivr.net/npm/vue@2/dist/vue.js"></script>
		<!-- *** [ Day.js ] ***  -->
		<script src="https://unpkg.com/dayjs@1.8.21/dayjs.min.js"></script>
		<!-- *** [ MY JS - (jQuery doc ready) ] *** -->
		<!-- <script type="text/javascript" src="js/main.js"></script> -->
		<!-- *** *** -->
		<link rel="shortcut icon" href="#">
		<title>js-html-css-boolzap</title>
	</head>
	<body>

		<!------------------------------------------

		nome repo: js-html-css-boolzap

		Milestone 1:
		● Replica della grafica con la possibilità di avere messaggi scritti 
			dall’utente (verdi) e dall’interlocutore (bianco) 
			assegnando due classi CSS diverse
		● Visualizzazione dinamica della lista contatti: 
			tramite la direttiva v-for, visualizzare nome e immagine di ogni contatto

		Milestone 2
		● Visualizzazione dinamica dei messaggi: 
			tramite la direttiva v-for, 
			visualizzare tutti i messaggi relativi al contatto attivo 
			all’interno del pannello della conversazione
		● Click sul contatto mostra la conversazione del contatto cliccato


		------------------------------------------->

		<div id="root" class="flex-row-co">

			<div class="main_wrapper flex-row">

				<!--*---------------- LEFT SIDE ----------------*-->
				<div class="left_side flex-col">

					<!-- ** left header ** -->
					<div class="left_header flex-row">
						<!-- ------------------------------------------------- -->
						<div class="component flex-row">
							<div class="avatar_img">
								<img :src="userImageSrc" alt="">
							</div>
							<div class="avatar_name flex-row-cv">
								<div class="txt_1">{{user.name}}</div>
							</div>
						</div>
						<!-- ------------------------------------------------- -->
						<div class="usr_icons flex-row-cv flex-row-right flex-grow-1">
							<i class="fas fa-circle-notch"></i>
							<i class="fas fa-comment-alt"></i>
							<i class="fas fa-ellipsis-v"></i>
						</div>
					</div>

					<!-- ** left notice ** -->
					<div class="left_notice flex-row-cv">
						<div class="notice_icon">
							<i class="fas fa-bell-slash"></i>
						</div>
						<div class="notice_message">
							<div class="txt_1">Ricevi notifiche d nuovi messaggi</div>
							<div class="txt_3">Attiva le notifiche desktop</div>
						</div>
					</div>

					<!-- ** left search ** -->
					<div class="left_search flex-row-cv">
						<!-- ! todo fare con label -->
						<div class="search_btn">
							<i class="fas fa-search"></i>
						</div>
						<div class="input_text_field flex-grow-1">
							<input type="text" placeholder="Cerca o ninizia una nuova chat"
								v-model="srcInput"
								@keyup="srcChat(srcInput)" 
								ref="srcInputField">
						</div>
					</div>

					<!-- ** chat list contanier ** -->
					<div class="chat_list_contanier flex-grow-1">
						<div class="contact flex-row" 
							v-for="(contact,index) in contacts" 
							:class="(index == contactSelectedIndex)?'selected':null" 
							@click="chatBtn(index)"
							v-if="contact.visible">
							<!-- ------------------------------------------------- -->
							<div class="component flex-row">
								<div class="avatar_img">
									<img :src="contactImageSrc(index)" alt="">
								</div>
								<div class="avatar_name flex-row-cv">
									<div class="txt_1">{{contact.name}}</div>
								</div>
							</div>
							<!-- ------------------------------------------------- -->
						</div> <!-- v-for: contact,index -->
					</div>

				</div> <!-- left_side -->

				<!--*---------------- RIGHT SIDE ----------------*-->
				<div class="right_side flex-col">

					<!-- ** right header ** -->
					<div class="right_header flex-row">
						<!-- ------------------------------------------------- -->
						<div class="contact_avatar">
							<img :src="contactImageSrc(contactSelectedIndex)" alt="">
						</div>
						<div class="contact_info flex-grow-1">
							<div class="txt_1">{{contacts[contactSelectedIndex].name}}</div>
							<div class="txt_2">Ultimo accesso il {{contactLastMsg.day}} alle {{contactLastMsg.hour}}</div>
						</div>
						<!-- ------------------------------------------------- -->
						<div class="contact_icons flex-row-cv">
							<i class="fas fa-search"></i>
							<i class="fas fa-paperclip"></i>
							<i class="fas fa-ellipsis-v"></i>
						</div>						
					</div>

					<!-- ** chat container ** -->
					<div class="chat_container flex-grow-1">
						<div class="chat_msg_list flex-col-co">
							<div class="msg_row flex-col" v-for="message in contacts[contactSelectedIndex].messages">
								<div class="msg" :class="message.status">
									<div class="msg_text txt_1">{{message.text}}</div>
									<div class="msg_date txt_4">{{message.date}}</div>
									<div class="msg_edit"
										@mouseleave="msgEditPanelLeave"
										@click="msgEditPanelClick">
										<i class="fas fa-angle-down"></i>
										<div v-show="msgEditIsOpen" class="msg_edit_box">
											<div class="msg_info txt_1" @click="msgInfos(message)">Message Info</div>
											<div class="msg_del txt_1"  @click="msgDelete(message)">Delete Message</div>
										</div>
									</div>
								</div>
							</div> <!-- v-for: message -->						
						</div>
					</div>

					<!-- ** input container ** -->
					<div class="input_container flex-row-cv">
						<i class="far fa-smile"></i>
						<div class="input_text_field flex-grow-1">
							<input type="text" placeholder="Scrivi un messaggio" 
								v-model="msgInput" 
								@keyup.enter="addSentMsg" 
								ref="msgInputField">
						</div>
						<i class="fas fa-microphone" v-if="msgInput==''"></i>
						<i class="fab fa-telegram-plane" v-else @click="addSentMsg"></i>
					</div>

				</div> <!-- right_side -->

			</div> <!-- main_wrapper -->

		</div> <!-- Vue root -->



		<!-- *** [ MY JS ] *** -->
		<script type="text/javascript" src="js/main.js"></script>
	</body>
</html>
